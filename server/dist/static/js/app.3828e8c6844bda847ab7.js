webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),o=s("mtWM"),n=s.n(o);const a="http://148.70.150.147:8080";var c={isAll:function(t){return t},isActiving:function(t){return t.filter(function(t){return!t.isChecked})},isChecked:function(t){return t.filter(function(t){return t.isChecked})}},d={name:"Todo",data:function(){return{todoList:[],isChecked:!1,visibility:"isAll"}},computed:{countActivingNum:function(){return c.isActiving(this.todoList).length},countCompletedNum:function(){return this.todoList.length-this.countActivingNum}},methods:{filteredTodoList:function(){return c[this.visibility](this.todoList)},isShowFilted:function(t){return this.filteredTodoList().some(function(e){return e._id===t._id})},toChecked:function(t,e){(t=>n.a.post(`${a}/api/update`,t).then(t=>t.data))({id:t._id,message:t.message,isChecked:!t.isChecked}).then(function(t){0===t.code&&console.log(t.msg)})},getAll:function(){var t=this;(t=>n.a.get(`${a}/api/all`,{params:t}))().then(function(e){200===e.status?t.todoList=e.data.todos:alert("信息获取失败，请查看服务器是否开启")})},selectAllTodos:function(){var t=this;(t=>n.a.post(`${a}/api/updateMany`,t).then(t=>t.data))({isChecked:!t.todoList.every(function(t){return t.isChecked})}).then(function(e){0===e.code&&t.getAll()})},addTodo:function(t){var e=this,s={status:!1,message:t.value,isChecked:!1};t.value="",(t=>n.a.post(`${a}/api/add`,t).then(t=>t.data))(s).then(function(t){0===t.code?(e.todoList.push(t.todos),console.log("添加成功")):4===t.code?(console.log("任务已存在"),alert("任务已存在")):console.log("任务添加失败")})},deleteTodo:function(t){var e=this;(t=>n.a.post(`${a}/api/deletes`,t).then(t=>t.data))({id:t.id||t._id}).then(function(t){0===t.code&&(t.todos.id?e.todoList.splice(e.todoList.findIndex(function(e){return e.id===t.todos.id}),1):e.todoList.splice(e.todoList.findIndex(function(e){return e._id===t.todos._id}),1))})},deleteAllCompleted:function(){var t=this,e="";t.todoList.forEach(function(t){var s=t.id||t._id;t.isChecked&&(e+=s+",")}),(t=>n.a.post(`${a}/api/deletemany`,t))({ids:e}).then(function(e){t.getAll()})},toEdit:function(t){t.status=!0},unEdit:function(t){t.status=!1,this.toChecked(t,!1)}},directives:{"todo-focus":function(t,e){e.value&&t.focus()}},created:function(){this.getAll()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"}},[s("div",{staticClass:"g-header"},[s("h1",[t._v("Todos")]),t._v(" "),s("div",{staticClass:"f-add"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.todoList.length>0,expression:"todoList.length>0"}],staticClass:"switch",on:{click:t.selectAllTodos}}),t._v(" "),s("input",{staticClass:"f-add-task",attrs:{type:"text",placeholder:"What needs to be down?",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTodo(e.target)}}})])]),t._v(" "),s("section",{staticClass:"g-content"},[s("ul",{staticClass:"g-tasklist"},t._l(t.todoList,function(e,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowFilted(e),expression:"isShowFilted(todo)"}],key:i,staticClass:"m-tasks"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isChecked,expression:"todo.isChecked"}],staticClass:"u-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isChecked)?t._i(e.isChecked,null)>-1:e.isChecked},on:{click:function(s){return t.toChecked(e,i)},change:function(s){var i=e.isChecked,o=s.target,n=!!o.checked;if(Array.isArray(i)){var a=t._i(i,null);o.checked?a<0&&t.$set(e,"isChecked",i.concat([null])):a>-1&&t.$set(e,"isChecked",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(e,"isChecked",n)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.status,expression:"!todo.status"}],staticClass:"u-message",class:{f_delete:e.isChecked},on:{dblclick:function(s){return t.toEdit(e)}}},[t._v("\n          "+t._s(e.message)+"\n        ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"todo.message"},{name:"show",rawName:"v-show",value:e.status,expression:"todo.status"},{name:"todo-focus",rawName:"v-todo-focus",value:e.message,expression:"todo.message"}],staticClass:"u-message u-update",attrs:{type:"text"},domProps:{value:e.message},on:{blur:function(s){return t.unEdit(e)},input:function(s){s.target.composing||t.$set(e,"message",s.target.value)}}}),t._v(" "),s("span",{staticClass:"u-close-icon u-close",attrs:{title:"删除"},on:{click:function(s){return t.deleteTodo(e)}}})])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.todoList.length>0,expression:"todoList.length>0"}],staticClass:"g-footer-btn"},[s("span",{staticClass:"g-data-num"},[t._v(t._s(t.countCompletedNum)+" item left")]),t._v(" "),s("ul",{staticClass:"g-filter"},[s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.visibility="isAll"}}},[t._v("All")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.visibility="isActiving"}}},[t._v("Activing")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.visibility="isChecked"}}},[t._v("Completed")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.countCompletedNum>0,expression:"countCompletedNum>0"}]},[s("a",{staticClass:"clear-completed",attrs:{href:"#"},on:{click:t.deleteAllCompleted}},[t._v("清空已完成")])])])])])},staticRenderFns:[]};var r={name:"App",components:{Todo:s("VU/8")(d,l,!1,function(t){s("RgTK")},null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Todo")],1)},staticRenderFns:[]};var h=s("VU/8")(r,u,!1,function(t){s("pvKw")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:h},template:"<App/>"})},RgTK:function(t,e){},pvKw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3828e8c6844bda847ab7.js.map